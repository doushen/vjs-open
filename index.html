<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>videojs-open Demo</title>
    <link href="/node_modules/video.js/dist/video-js.css" rel="stylesheet">
    <link href="/dist/videojs-open.css" rel="stylesheet">
</head>

<body>
    <video id="videojs-open-player" class="video-js vjs-default-skin" controls data-setup='{"language":"zh-CN"}'>
        <track src="/captions.en.vtt" srclang="en" label="English" default></track>
        <!--  <source src="http://vjs.zencdn.net/v/oceans.mp4" type="video/mp4" res='360' label='SD'>
    <source src="http://vjs.zencdn.net/v/oceans.mp4" type="video/mp4" res='480' label='HD'>
    <source src="http://vjs.zencdn.net/v/oceans.webm" type="video/webm"  res='720' label='LD'>
    <source src="http://vjs.zencdn.net/v/oceans.ogv" type="video/ogg" res='1080' label='FHD'>
    <p class="vjs-no-js">
      请升级浏览器来播放
      <a href="http://videojs.com/html5-video-support/" target="_blank" class="vjs-hidden" hidden="hidden">HTML5 视频</a>
    </p>
    -->
    </video>
    <ul>
        <li>
            <a href="/test/">Run unit tests in browser.</a>
        </li>
        <li>
            <a href="/docs/api/">Read generated docs.</a>
        </li>
    </ul>
    <script src="/node_modules/jquery/jquery.min.js"></script>
    <script src="/node_modules/video.js/dist/video.js"></script>
    <script src="/dist/videojs-open.js"></script>
    <script src="/dist/lang/zh-CN.js"></script>
    <script>
    (function(window, videojs) {
        videojs.options.flash.swf = '../node_modules/videojs-swf/dist/video-js.swf';
        var player = window.player = videojs('videojs-open-player', {
            controls: true,
            plugins: {
                videoJsResolutionSwitcher: {
                    ui: true,
                    default: '480',
                    dynamicLabel: true
                },
                disableProgress: {
                    autoDisable: false
                },
                waterMark: {
                    file: 'Logo.png',
                    xpos: 0,
                    ypos: 100,
                    xrepeat: 0,
                    opacity: 0.5,
                },
                // record: {
                //     image: true,
                //     audio: false,
                //     video: true,
                //     maxLength: 5,
                //     debug: true
                // }
            }
        }, function() {
            var player = this;
            window.player = player
                // Add dynamically sources via updateSrc method
            player.updateSrc([{
                src: 'http://vjs.zencdn.net/v/oceans.mp4?HD',
                type: 'video/mp4',
                label: '高清',
                res: '480'
            }, {
                src: 'http://vjs.zencdn.net/v/oceans.mp4?SD',
                type: 'video/mp4',
                label: '标清',
                res: '360'
            }]);
            // Switch Resolution Event
            player.on('resolutionchange', function(e) {
                console.info('Source changed to %s', player.src())
            });
            // Init videoJsResolutionSwitcher
            player.videoJsResolutionSwitcher();
            // disableProgress
            player.disableProgress.disable();
            // make marks
            player.markers({
                breakOverlay: {
                    display: true,
                    displayTime: 1,
                    text: function(marker) {
                        return marker.overlayText;
                    },
                    style: {
                        'width': '100%',
                        'height': '100%',
                        'background-color': 'rgba(0,0,0,0.7)',
                        'color': 'white',
                        'font-size': '17px'
                    }
                },
                markerStyle: {
                    'width': '7px',
                    'border-radius': '20%',
                    'background-color': '#fff'
                },
                markers: [{
                    time: 9,
                    text: "本节特性：<br />前端自动化流程的构建<br />与流程自动化测试流程<br />持续集成",
                    overlayText: "<button onclick='player.play();'>关闭</button>"
                }, {
                    time: 16,
                    text: "本节特性：<br />前端自动化流程的构建与流程自动化测试流程持续集成",
                    overlayText: "<button onclick='player.play();'>关闭</button>"
                }, {
                    time: 23,
                    text: "本节特性：前端自动化流程的构建与流程自动化测试流程持续集成",
                    overlayText: "<button onclick='player.play();'>关闭</button>"
                }, {
                    time: 28,
                    text: "本节特性：前端自动化流程的构建与流程自动化测试流程持续集成",
                    overlayText: "<button onclick='player.play();'>关闭</button>"
                }],
                onMarkerReached: function(marker) {
                    player.pause();
                    // console.log(marker);
                }
            });
            // make watermark
            player.waterMark({
                file: 'Logo.png',
                xpos: 100,
                ypos: 100,
                xrepeat: 0,
                opacity: 0.5,
            });
        });
        player.open();
    }(window, window.videojs));
    </script>
</body>

</html>
