/**
 * videojs-open
 * @version 1.0.0
 * @copyright 2016 open-liyanan <20137848@qq.com>
 * @license MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsOpen=e()}}(function(){return function e(t,r,n){function o(a,l){if(!r[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,i=n(o),a={},l=function(e,t){e.addClass("vjs-open")},s=function(e){var t=this;this.ready(function(){l(t,i.default.mergeOptions(a,e))})},u=function(e){function t(e,t){return e.res&&t.res?+t.res-+e.res:0}function r(e){var t={label:{},res:{},type:{}};return e.map(function(e){n(t,"label",e),n(t,"res",e),n(t,"type",e),o(t,"label",e),o(t,"res",e),o(t,"type",e)}),t}function n(e,t,r){null==e[t][r[t]]&&(e[t][r[t]]=[])}function o(e,t,r){e[t][r[t]].push(r)}function a(e,t){var r=s.default,n="";return"high"===r?(r=t[0].res,n=t[0].label):"low"!==r&&null!=r&&e.res[r]?e.res[r]&&(n=e.res[r][0].label):(r=t[t.length-1].res,n=t[t.length-1].label),{res:r,label:n,sources:e.res[r]}}function l(e){var t={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"auto"}},n=function(t,r,n){return e.tech_.ytPlayer.setPlaybackQuality(r[0]._yt),e.trigger("updateSources"),e};s.customSourcePicker=n,e.tech_.ytPlayer.setPlaybackQuality("auto"),e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(r){for(var o in t)if(o.yt===r.data)return void e.currentResolution(o.label,n)}),e.one("play",function(){var o=e.tech_.ytPlayer.getAvailableQualityLevels(),i=[];o.map(function(r){i.push({src:e.src().src,type:e.src().type,label:t[r].label,res:t[r].res,_yt:t[r].yt})}),e.groupedSrc=r(i);var a={label:"auto",res:0,sources:e.groupedSrc.label.auto};this.currentResolutionState={label:a.label,sources:a.sources},e.trigger("updateSources"),e.setSourcesSanitized(a.sources,a.label,n)})}var s=i.default.mergeOptions(c,e),u=this;u.updateSrc=function(e){if(!e)return u.src();e=e.filter(function(e){try{return""!==u.canPlayType(e.type)}catch(e){return!0}}),this.currentSources=e.sort(t),this.groupedSrc=r(this.currentSources);var n=a(this.groupedSrc,this.currentSources);return this.currentResolutionState={label:n.label,sources:n.sources},u.trigger("updateSources"),u.setSourcesSanitized(n.sources,n.label),u.trigger("resolutionchange"),u},u.currentResolution=function(e,t){if(null==e)return this.currentResolutionState;if(this.groupedSrc&&this.groupedSrc.label&&this.groupedSrc.label[e]){var r=this.groupedSrc.label[e],n=u.currentTime(),o=u.paused();!o&&this.player_.options_.bigPlayButton&&this.player_.bigPlayButton.hide();var i="loadeddata";return"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(i="timeupdate"),u.setSourcesSanitized(r,e,t||s.customSourcePicker).one(i,function(){u.currentTime(n),u.handleTechSeeked_(),o||u.play().handleTechSeeked_(),u.trigger("resolutionchange")}),u}},u.getGroupedSrc=function(){return this.groupedSrc},u.setSourcesSanitized=function(e,t,r){return this.currentResolutionState={label:t,sources:e},"function"==typeof r?r(u,e,t):(u.src(e.map(function(e){return{src:e.src,type:e.type,res:e.res}})),u)},u.ready(function(){if(s.ui){var e=new h(u,s);u.controlBar.resolutionSwitcher=u.controlBar.el_.insertBefore(e.el_,u.controlBar.getChild("fullscreenToggle").el_),u.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)}}u.options_.sources.length>1&&u.updateSrc(u.options_.sources),"Youtube"===u.techName_&&l(u)});var c={ui:!0},d=i.default.getComponent("MenuItem"),p=i.default.extend(d,{constructor:function(e,t){t.selectable=!0,d.call(this,e,t),this.src=t.src,e.on("resolutionchange",i.default.bind(this,this.update))}});p.prototype.handleClick=function(e){d.prototype.handleClick.call(this,e),this.player_.currentResolution(this.options_.label)},p.prototype.update=function(){var e=this.player_.currentResolution();this.selected(this.options_.label===e.label)},d.registerComponent("ResolutionMenuItem",p);var f=i.default.getComponent("MenuButton"),h=i.default.extend(f,{constructor:function(e,t){if(this.label=document.createElement("span"),t.label="Quality",f.call(this,e,t),this.el().setAttribute("aria-label","Quality"),this.controlText("Quality"),t.dynamicLabel)i.default.addClass(this.label,"vjs-resolution-button-label"),this.el().appendChild(this.label);else{var r=document.createElement("span");i.default.addClass(r,"vjs-menu-icon"),this.el().appendChild(r)}e.on("updateSources",i.default.bind(this,this.update))}});h.prototype.createItems=function(){var e=[],t=this.sources&&this.sources.label||{};for(var r in t)t.hasOwnProperty(r)&&e.push(new p(this.player_,{label:r,src:t[r],selected:r===(!!this.currentSelection&&this.currentSelection.label)}));return e},h.prototype.update=function(){return this.sources=this.player_.getGroupedSrc(),this.currentSelection=this.player_.currentResolution(),this.label.innerHTML=this.currentSelection?this.currentSelection.label:"",f.prototype.update.call(this)},h.prototype.buildCSSClass=function(){return f.prototype.buildCSSClass.call(this)+" vjs-resolution-button"},f.registerComponent("ResolutionMenuButton",h)},c=function(e){var t=function(e){var t,r,n;for(r=1;r<arguments.length;r++){t=arguments[r];for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e},r={autoDisable:!1},n=this,o=!1,i=t({},r,e||{});n.disableProgress={disable:function(){o=!0,n.controlBar.progressControl.seekBar.off("focus"),n.controlBar.progressControl.seekBar.off("mousedown"),n.controlBar.progressControl.seekBar.off("touchstart"),n.controlBar.progressControl.seekBar.off("click")},enable:function(){o=!1,n.controlBar.progressControl.seekBar.on("focus",n.controlBar.progressControl.seekBar.handleFocus),n.controlBar.progressControl.seekBar.on("mousedown",n.controlBar.progressControl.seekBar.handleMouseDown),n.controlBar.progressControl.seekBar.on("touchstart",n.controlBar.progressControl.seekBar.handleMouseDown),n.controlBar.progressControl.seekBar.on("click",n.controlBar.progressControl.seekBar.handleClick)},getState:function(){return o}},i.autoDisable&&n.disableProgress.disable()},d=function(e){function t(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)});return t}function r(){g.sort(function(e,t){return m.markerTip.time(e)-m.markerTip.time(t)})}function n(e){$.each(e,function(e,r){r.key=t(),b.find(".vjs-progress-control .vjs-slider").append(i(r)),v[r.key]=r,g.push(r)}),r()}function o(e){return m.markerTip.time(e)/x.duration()*100}function i(e,t){var r=$("<div class='vjs-marker'></div>");return r.css(m.markerStyle).css({left:o(e)+"%"}).attr("data-marker-key",e.key).attr("data-marker-time",m.markerTip.time(e)),e.class&&r.addClass(e.class),r.on("click",function(t){var r=!1;if("function"==typeof m.onMarkerClick&&(r=0==m.onMarkerClick(e)),!r){var n=$(this).data("marker-key");x.currentTime(m.markerTip.time(v[n]))}}),m.markerTip.display&&s(r),r}function a(){for(var e=0;e<g.length;e++){var t=g[e],n=b.find(".vjs-marker[data-marker-key='"+t.key+"']"),i=m.markerTip.time(t);n.data("marker-time")!=i&&n.css({left:o(t)+"%"}).attr("data-marker-time",i)}r()}function l(e){w&&(C=-1,w.css("visibility","hidden")),k=-1;for(var t=0;t<e.length;t++){var n=e[t],o=g[n];o&&(delete v[o.key],g[n]=null,b.find(".vjs-marker[data-marker-key='"+o.key+"']").remove())}for(var t=g.length-1;t>=0;t--)null===g[t]&&g.splice(t,1);r()}function s(e){e.on("mouseover",function(){var e=v[$(this).data("marker-key")];S.find(".vjs-tip-inner").html(m.markerTip.text(e)),S.css({left:o(e)+"%","margin-left":-parseFloat(S.css("width"))/2-5+"px",visibility:"visible"})}).on("mouseout",function(){S.css("visibility","hidden")})}function u(){S=$("<div class='vjs-tip'><div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div></div>"),b.find(".vjs-progress-control .vjs-slider").append(S)}function c(){if(m.breakOverlay.display&&!(k<0)){var e=x.currentTime(),t=g[k],r=m.markerTip.time(t);e>=r&&e<=r+m.breakOverlay.displayTime?(C!=k&&(C=k,w.find(".vjs-break-overlay-text").html(m.breakOverlay.text(t))),w.css("visibility","visible")):(C=-1,w.css("visibility","hidden"))}}function d(){w=$("<div class='vjs-break-overlay'><div class='vjs-break-overlay-text'></div></div>").css(m.breakOverlay.style),b.append(w),C=-1}function p(){f(),c()}function f(){var t,r=function(e){return e<g.length-1?m.markerTip.time(g[e+1]):x.duration()},n=x.currentTime();if(k!=-1){var o=r(k);if(n>=m.markerTip.time(g[k])&&n<o)return;if(k===g.length-1&&n===x.duration())return}if(g.length>0&&n<m.markerTip.time(g[0]))t=-1;else for(var i=0;i<g.length;i++)if(o=r(i),n>=m.markerTip.time(g[i])&&n<o){t=i;break}t!=k&&(t!=-1&&e.onMarkerReached&&e.onMarkerReached(g[t]),k=t)}function h(){m.markerTip.display&&u(),x.markers.removeAll(),n(e.markers),m.breakOverlay.display&&d(),p(),x.on("timeupdate",p)}var y={markerStyle:{width:"8px","border-radius":"20%","background-color":"rgba(255,0,0,.5)"},markerTip:{display:!0,text:function(e){return e.text},time:function(e){return e.time}},breakOverlay:{display:!1,displayTime:3,text:function(e){return"Break overlay: "+e.overlayText},style:{width:"100%",height:"20%","background-color":"rgba(0,0,0,0.7)",color:"white","font-size":"17px"}},onMarkerClick:function(e){},onMarkerReached:function(e){},markers:[]},m=$.extend(!0,{},y,e),v={},g=[],b=$(this.el()),k=-1,x=this,S=null,w=null,C=-1;x.on("loadedmetadata",function(){h()}),x.markers={getMarkers:function(){return g},next:function(){for(var e=x.currentTime(),t=0;t<g.length;t++){var r=m.markerTip.time(g[t]);if(r>e){x.currentTime(r);break}}},prev:function(){for(var e=x.currentTime(),t=g.length-1;t>=0;t--){var r=m.markerTip.time(g[t]);if(r+.5<e){x.currentTime(r);break}}},add:function(e){n(e)},remove:function(e){l(e)},removeAll:function(){for(var e=[],t=0;t<g.length;t++)e.push(t);l(e)},updateTime:function(){a()},reset:function(e){x.markers.removeAll(),n(e)},destroy:function(){x.markers.removeAll(),w.remove(),S.remove(),x.off("timeupdate",c),delete x.markers}}},p=function(e){var t,r={file:"Owned_Stamp.png",xpos:0,ypos:0,xrepeat:0,opacity:100,clickable:!1,url:"",className:"vjs-watermark",text:!1,debug:!1},n=function e(){var t,r,n,o,i;t=Array.prototype.slice.call(arguments),r=t.shift()||{};for(n in t){o=t[n];for(i in o)o.hasOwnProperty(i)&&("object"==typeof o[i]?r[i]=e(r[i],o[i]):r[i]=o[i])}return r};settings.debug&&console.log("watermark: Register init");var e,o,i,a,l;e=n(r,settings),o=this.el(),i=this.el().getElementsByTagName("video")[0],t?t.innerHTML="":(t=document.createElement("div"),t.className=e.className),e.text&&(t.textContent=e.text),e.file&&(a=document.createElement("img"),t.appendChild(a),a.src=e.file),0===e.ypos&&0===e.xpos?(t.style.top="0",t.style.left="0"):0===e.ypos&&100===e.xpos?(t.style.top="0",t.style.right="0"):100===e.ypos&&100===e.xpos?(t.style.bottom="0",t.style.right="0"):100===e.ypos&&0===e.xpos?(t.style.bottom="0",t.style.left="0"):50===e.ypos&&50===e.xpos&&(e.debug&&console.log("watermark: player:"+o.width+"x"+o.height),e.debug&&console.log("watermark: video:"+i.videoWidth+"x"+i.videoHeight),e.debug&&console.log("watermark: image:"+a.width+"x"+a.height),t.style.top=this.height()/2+"px",t.style.left=this.width()/2+"px"),t.style.opacity=e.opacity,e.clickable&&""!==e.url?(l=document.createElement("a"),l.href=e.url,l.target="_blank",l.appendChild(t),o.appendChild(l)):o.appendChild(t),e.debug&&console.log("watermark: Register end")};i.default.plugin("open",s),i.default.plugin("videoJsResolutionSwitcher",u),i.default.plugin("disableProgress",c),i.default.plugin("markers",d),i.default.plugin("waterMark",p),s.VERSION="1.0.0",r.default=s,t.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});