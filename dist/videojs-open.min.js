/**
 * videojs-open
 * @version 1.0.0
 * @copyright 2016 open-liyanan <20137848@qq.com>
 * @license MIT
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.videojsOpen=e()}}(function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){(function(e){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,i=n(o),a={},s=function(e,t){e.addClass("vjs-open")},l=function(e){var t=this;this.ready(function(){s(t,i.default.mergeOptions(a,e))})},u=function(e){function t(e,t){return e.res&&t.res?+t.res-+e.res:0}function r(e){var t={label:{},res:{},type:{}};return e.map(function(e){n(t,"label",e),n(t,"res",e),n(t,"type",e),o(t,"label",e),o(t,"res",e),o(t,"type",e)}),t}function n(e,t,r){null==e[t][r[t]]&&(e[t][r[t]]=[])}function o(e,t,r){e[t][r[t]].push(r)}function a(e,t){var r=l.default,n="";return"high"===r?(r=t[0].res,n=t[0].label):"low"!==r&&null!=r&&e.res[r]?e.res[r]&&(n=e.res[r][0].label):(r=t[t.length-1].res,n=t[t.length-1].label),{res:r,label:n,sources:e.res[r]}}function s(e){var t={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,label:"144",yt:"tiny"},auto:{res:0,label:"auto",yt:"auto"}},n=function(t,r,n){return e.tech_.ytPlayer.setPlaybackQuality(r[0]._yt),e.trigger("updateSources"),e};l.customSourcePicker=n,e.tech_.ytPlayer.setPlaybackQuality("auto"),e.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(r){for(var o in t)if(o.yt===r.data)return void e.currentResolution(o.label,n)}),e.one("play",function(){var o=e.tech_.ytPlayer.getAvailableQualityLevels(),i=[];o.map(function(r){i.push({src:e.src().src,type:e.src().type,label:t[r].label,res:t[r].res,_yt:t[r].yt})}),e.groupedSrc=r(i);var a={label:"auto",res:0,sources:e.groupedSrc.label.auto};this.currentResolutionState={label:a.label,sources:a.sources},e.trigger("updateSources"),e.setSourcesSanitized(a.sources,a.label,n)})}var l=i.default.mergeOptions(c,e),u=this;u.updateSrc=function(e){if(!e)return u.src();e=e.filter(function(e){try{return""!==u.canPlayType(e.type)}catch(e){return!0}}),this.currentSources=e.sort(t),this.groupedSrc=r(this.currentSources);var n=a(this.groupedSrc,this.currentSources);return this.currentResolutionState={label:n.label,sources:n.sources},u.trigger("updateSources"),u.setSourcesSanitized(n.sources,n.label),u.trigger("resolutionchange"),u},u.currentResolution=function(e,t){if(null==e)return this.currentResolutionState;if(this.groupedSrc&&this.groupedSrc.label&&this.groupedSrc.label[e]){var r=this.groupedSrc.label[e],n=u.currentTime(),o=u.paused();!o&&this.player_.options_.bigPlayButton&&this.player_.bigPlayButton.hide();var i="loadeddata";return"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(i="timeupdate"),u.setSourcesSanitized(r,e,t||l.customSourcePicker).one(i,function(){u.currentTime(n),u.handleTechSeeked_(),o||u.play().handleTechSeeked_(),u.trigger("resolutionchange")}),u}},u.getGroupedSrc=function(){return this.groupedSrc},u.setSourcesSanitized=function(e,t,r){return this.currentResolutionState={label:t,sources:e},"function"==typeof r?r(u,e,t):(u.src(e.map(function(e){return{src:e.src,type:e.type,res:e.res}})),$(".vjs-resolution-button-label").html(t),u)},u.ready(function(){if(l.ui){var e=new h(u,l);u.controlBar.resolutionSwitcher=u.controlBar.el_.insertBefore(e.el_,u.controlBar.getChild("fullscreenToggle").el_),u.controlBar.resolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)}}u.options_.sources.length>1&&u.updateSrc(u.options_.sources),"Youtube"===u.techName_&&s(u)});var c={ui:!0},d=i.default.getComponent("MenuItem"),p=i.default.extend(d,{constructor:function(e,t){t.selectable=!0,d.call(this,e,t),this.src=t.src,e.on("resolutionchange",i.default.bind(this,this.update))}});p.prototype.handleClick=function(e){d.prototype.handleClick.call(this,e),this.player_.currentResolution(this.options_.label)},p.prototype.update=function(){var e=this.player_.currentResolution();this.selected(this.options_.label===e.label)};var f=i.default.getComponent("MenuButton"),h=i.default.extend(f,{constructor:function(e,t){if(this.label=document.createElement("span"),t.label="Quality",f.call(this,e,t),this.el().setAttribute("aria-label","Quality"),this.controlText("Quality"),t.dynamicLabel)i.default.addClass(this.label,"vjs-resolution-button-label"),this.el().appendChild(this.label);else{var r=document.createElement("span");i.default.addClass(r,"vjs-menu-icon"),this.el().appendChild(r)}e.on("updateSources",i.default.bind(this,this.update))}});h.prototype.createItems=function(){var e=[],t=this.sources&&this.sources.label||{};for(var r in t)t.hasOwnProperty(r)&&e.push(new p(this.player_,{label:r,src:t[r],selected:r===(!!this.currentSelection&&this.currentSelection.label)}));return e},h.prototype.update=function(){return this.sources=this.player_.getGroupedSrc(),this.currentSelection=this.player_.currentResolution(),this.label.innerHTML=this.currentSelection?this.currentSelection.label:"",f.prototype.update.call(this)},h.prototype.buildCSSClass=function(){return f.prototype.buildCSSClass.call(this)+" vjs-resolution-button"}},c=function(e){var t=function(e){var t,r,n;for(r=1;r<arguments.length;r++){t=arguments[r];for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e},r={autoDisable:!1},n=this,o=!1,i=t({},r,e||{});n.disableProgress={disable:function(){o=!0,n.controlBar.progressControl.seekBar.off("focus"),n.controlBar.progressControl.seekBar.off("mousedown"),n.controlBar.progressControl.seekBar.off("touchstart"),n.controlBar.progressControl.seekBar.off("click")},enable:function(){o=!1,n.controlBar.progressControl.seekBar.on("focus",n.controlBar.progressControl.seekBar.handleFocus),n.controlBar.progressControl.seekBar.on("mousedown",n.controlBar.progressControl.seekBar.handleMouseDown),n.controlBar.progressControl.seekBar.on("touchstart",n.controlBar.progressControl.seekBar.handleMouseDown),n.controlBar.progressControl.seekBar.on("click",n.controlBar.progressControl.seekBar.handleClick)},getState:function(){return o}},i.autoDisable&&n.disableProgress.disable()},d=function(e){function t(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)});return t}function r(){g.sort(function(e,t){return y.markerTip.time(e)-y.markerTip.time(t)})}function n(e){$.each(e,function(e,r){r.key=t(),b.find(".vjs-progress-control").append(i(r)),v[r.key]=r,g.push(r)}),r()}function o(e){return y.markerTip.time(e)/x.duration()*100}function i(e,t){var r=$("<div class='vjs-marker'></div>"),n=parseInt(b.find(".vjs-progress-control .vjs-slider").css("marginLeft"));return r.css(y.markerStyle).css({"margin-left":n-parseFloat(r.css("width"))/2+"px",left:o(e)+"%"}).attr("data-marker-key",e.key).attr("data-marker-time",y.markerTip.time(e)),e.class&&r.addClass(e.class),r.on("click",function(t){var r=!1;if("function"==typeof y.onMarkerClick&&(r=0==y.onMarkerClick(e)),!r){var n=$(this).data("marker-key");x.currentTime(y.markerTip.time(v[n]))}}),y.markerTip.display&&l(r),r}function a(){for(var e=0;e<g.length;e++){var t=g[e],n=b.find(".vjs-marker[data-marker-key='"+t.key+"']"),i=y.markerTip.time(t);n.data("marker-time")!=i&&n.css({left:o(t)+"%"}).attr("data-marker-time",i)}r()}function s(e){S&&(w=-1,S.css("visibility","hidden")),k=-1;for(var t=0;t<e.length;t++){var n=e[t],o=g[n];o&&(delete v[o.key],g[n]=null,b.find(".vjs-marker[data-marker-key='"+o.key+"']").remove())}for(var t=g.length-1;t>=0;t--)null===g[t]&&g.splice(t,1);r()}function l(e){e.on("mouseover",function(){var e=v[$(this).data("marker-key")];T.find(".vjs-tip-inner").html(y.markerTip.text(e)),T.css({left:o(e)+"%","margin-left":-parseFloat(T.css("width"))/2-5+"px",visibility:"visible"})}).on("mouseout",function(){T.css("visibility","hidden")})}function u(){T=$("<div class='vjs-tip'><div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div></div>"),b.find(".vjs-progress-control").append(T)}function c(){if(y.breakOverlay.display&&!(k<0)){var e=x.currentTime(),t=g[k],r=y.markerTip.time(t);_=r+y.breakOverlay.displayTime,e>=r&&e<=_?(w!=k&&(w=k,S.find(".vjs-break-overlay-text").html(y.breakOverlay.text(t))),S.css("visibility","visible")):(w=-1,S.css("visibility","hidden"),_=0)}}function d(){S=$("<div class='vjs-break-overlay'><div class='vjs-break-overlay-text'></div></div>").css(y.breakOverlay.style),b.append(S),w=-1}function p(){f(),c()}function f(){var t,r=function(e){return e<g.length-1?y.markerTip.time(g[e+1]):x.duration()},n=x.currentTime();if(k!=-1){var o=r(k);if(n>=y.markerTip.time(g[k])&&n<o)return;if(k===g.length-1&&n===x.duration())return}if(g.length>0&&n<y.markerTip.time(g[0]))t=-1;else for(var i=0;i<g.length;i++)if(o=r(i),n>=y.markerTip.time(g[i])&&n<o){t=i;break}t!=k&&(t!=-1&&e.onMarkerReached&&e.onMarkerReached(g[t]),k=t)}function h(){y.markerTip.display&&u(),x.markers.removeAll(),n(e.markers),y.breakOverlay.display&&d(),p(),x.on("timeupdate",p)}var m={markerStyle:{width:"8px","border-radius":"20%","background-color":"rgba(255,0,0,.5)"},markerTip:{display:!0,text:function(e){return e.text},time:function(e){return e.time}},breakOverlay:{display:!0,displayTime:1,text:function(e){return e.overlayText},style:{width:"100%",height:"calc(100% - 36px)","background-color":"rgba(0,0,0,0.7)",color:"white","font-size":"17px"}},onMarkerClick:function(e){return!1},onMarkerReached:function(e){},markers:[]},y=$.extend(!0,{},m,e),v={},g=[],b=$(this.el()),k=-1,x=this,T=null,S=null,w=-1,_=0;x.on("loadedmetadata",function(){h()}),x.markers={getMarkers:function(){return g},next:function(){for(var e=x.currentTime(),t=0;t<g.length;t++){var r=y.markerTip.time(g[t]);if(r>e){x.currentTime(r);break}}},prev:function(){for(var e=x.currentTime(),t=g.length-1;t>=0;t--){var r=y.markerTip.time(g[t]);if(r+.5<e){x.currentTime(r);break}}},add:function(e){n(e)},remove:function(e){s(e)},removeAll:function(){for(var e=[],t=0;t<g.length;t++)e.push(t);s(e)},updateTime:function(){a()},reset:function(e){x.markers.removeAll(),n(e)},destroy:function(){x.markers.removeAll(),S.remove(),T.remove(),x.off("timeupdate",c),delete x.markers}}},p=function(e){var t,r={file:"logo.png",xpos:0,ypos:0,xrepeat:0,opacity:100,clickable:!1,url:"",className:"vjs-watermark",text:!1,debug:!1},n=function e(){var t,r,n,o,i;t=Array.prototype.slice.call(arguments),r=t.shift()||{};for(n in t){o=t[n];for(i in o)o.hasOwnProperty(i)&&("object"==typeof o[i]?r[i]=e(r[i],o[i]):r[i]=o[i])}return r};e.debug&&console.log("watermark: Register init");var o,i,a,s,l;o=n(r,e),i=this.el(),a=this.el().getElementsByTagName("video")[0],t?t.innerHTML="":(t=document.createElement("div"),t.className=o.className),o.text&&(t.textContent=o.text),o.file&&(s=document.createElement("img"),t.appendChild(s),t.style.display="inline-block",t.style.position="absolute",t.style.zIndex=0,s.src=o.file),0===o.ypos&&0===o.xpos?(t.style.top="0px",t.style.left="0px"):0===o.ypos&&100===o.xpos?(t.style.top="0px",t.style.right="0px"):100===o.ypos&&100===o.xpos?(t.style.bottom="0px",t.style.right="0px"):100===o.ypos&&0===o.xpos?(t.style.bottom="0px",t.style.left="0px"):50===o.ypos&&50===o.xpos&&(o.debug&&console.log("watermark: player:"+i.width+"x"+i.height),o.debug&&console.log("watermark: video:"+a.videoWidth+"x"+a.videoHeight),o.debug&&console.log("watermark: image:"+s.width+"x"+s.height),t.style.top=this.height()/2+"px",t.style.left=this.width()/2+"px"),t.style.opacity=o.opacity,o.clickable&&""!==o.url?(l=document.createElement("a"),l.href=o.url,l.target="_blank",l.appendChild(t),i.appendChild(l)):i.appendChild(t),o.debug&&console.log("watermark: Register end")},f={getPlayerSnapshot:function(e){var t=void 0;t=i.default.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var r=e.$(".vjs-tech"),n=e.remoteTextTracks?e.remoteTextTracks():[],o=[],a={ended:e.ended(),currentSrc:e.currentSrc(),src:e.src(),currentTime:t,type:e.currentType()};r&&(a.nativePoster=r.poster,a.style=r.getAttribute("style"));for(var s=n.length-1;s>=0;s--){var l=n[s];o.push({track:l,mode:l.mode}),l.mode="disabled"}return a.suppressedTracks=o,a},restorePlayerSnapshot:function(e,t){if(e.ads.disableNextSnapshotRestore===!0)return void(e.ads.disableNextSnapshotRestore=!1);var r=e.$(".vjs-tech"),n=20,o=t.suppressedTracks,a=void 0,s=function(){for(var e=o.length;e>0;e--)a=o[e],a.track.mode=a.mode},l=function(){var r=void 0;i.default.browser.IS_IOS&&e.ads.isLive(e)?t.currentTime<0&&(r=e.seekable().length>0?e.seekable().end(0)+t.currentTime:e.currentTime(),e.currentTime(r)):e.currentTime(t.ended?e.duration():t.currentTime),t.ended||e.play()},u=function t(){if(e.off("contentcanplay",t),e.ads.tryToResumeTimeout_&&(e.clearTimeout(e.ads.tryToResumeTimeout_),e.ads.tryToResumeTimeout_=null),r=e.el().querySelector(".vjs-tech"),r.readyState>1)return l();if(void 0===r.seekable)return l();if(r.seekable.length>0)return l();if(n--)window.setTimeout(t,50);else try{l()}catch(e){i.default.log.warn("Failed to resume the content after an advertisement",e)}};t.nativePoster&&(r.poster=t.nativePoster),"style"in t&&r.setAttribute("style",t.style||""),e.ads.videoElementRecycled()?(e.one("contentloadedmetadata",s),e.src({src:t.currentSrc,type:t.type}),e.load(),e.one("contentcanplay",u),e.ads.tryToResumeTimeout_=e.setTimeout(u,2e3)):e.ended()&&t.ended||(s(),e.play())}},h=function(e){function t(){var e=parseInt(s.currentTime());s.paused();if(e!=n&&(n=e,0==e&&s.trigger("timeUpdate",{type:"start",current:s.currentTime(),total:s.duration()}),o.secPerTime>0&&e%o.secPerTime==0&&s.trigger("timeUpdate",{type:"tick",current:s.currentTime(),total:s.duration()}),o.finishPct>=0&&o.finishPct<=100)){var t=s.currentTime()/s.duration();t>=o.finishPct/100?o.isFinish&&void 0!=o.isFinish||(o.isFinish=!0,s.trigger("timeUpdate",{type:"finish",current:s.currentTime(),total:s.duration()})):o.isFinish=!1}}function r(){s.trigger("timeUpdate",{type:"ended",current:s.currentTime(),total:s.duration()})}var n,o=i.default.mergeOptions(a,e),s=this;this.on("timeupdate",t),this.on("ended",r)};i.default.plugin("open",l),i.default.plugin("videoJsResolutionSwitcher",u),i.default.plugin("disableProgress",c),i.default.plugin("markers",d),i.default.plugin("waterMark",p),i.default.plugin("snapshot",f),i.default.plugin("recordPoint",h),l.VERSION="1.0.0",r.default=l,t.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});